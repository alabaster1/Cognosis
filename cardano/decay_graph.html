<!DOCTYPE html>
<html>
<head>
  <title>Psy Token Decay Function</title>
  <style>
    body { margin: 0; background: #1a1a2e; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; font-family: -apple-system, BlinkMacSystemFont, sans-serif; color: #e0e0e0; }
    h1 { font-size: 1.4rem; margin-bottom: 4px; color: #a78bfa; }
    .subtitle { font-size: 0.85rem; color: #888; margin-bottom: 20px; }
    canvas { border-radius: 12px; box-shadow: 0 4px 24px rgba(0,0,0,0.4); }
    .legend { display: flex; gap: 24px; margin-top: 16px; font-size: 0.8rem; }
    .legend-item { display: flex; align-items: center; gap: 6px; }
    .legend-dot { width: 12px; height: 12px; border-radius: 50%; }
    .formula { margin-top: 12px; font-family: monospace; font-size: 0.9rem; color: #c4b5fd; background: rgba(167,139,250,0.1); padding: 8px 16px; border-radius: 6px; }
  </style>
</head>
<body>
  <h1>Hyperbolic Decay: Psy Token Rewards</h1>
  <div class="subtitle">reward = base_reward * decay_factor / (decay_factor + total_claims)</div>
  <canvas id="chart" width="700" height="420"></canvas>
  <div class="legend">
    <div class="legend-item"><div class="legend-dot" style="background:#a78bfa"></div>decay_factor = 50 (fast)</div>
    <div class="legend-item"><div class="legend-dot" style="background:#34d399"></div>decay_factor = 100 (medium)</div>
    <div class="legend-item"><div class="legend-dot" style="background:#fbbf24"></div>decay_factor = 500 (slow)</div>
  </div>
  <div class="formula">base_reward = 1000 Psy tokens</div>
  <script>
    const canvas = document.getElementById('chart');
    const ctx = canvas.getContext('2d');
    const W = canvas.width, H = canvas.height;
    const pad = { top: 30, right: 30, bottom: 50, left: 70 };
    const plotW = W - pad.left - pad.right;
    const plotH = H - pad.top - pad.bottom;

    const baseReward = 1000;
    const maxClaims = 1000;
    const curves = [
      { decay: 50, color: '#a78bfa' },
      { decay: 100, color: '#34d399' },
      { decay: 500, color: '#fbbf24' },
    ];

    // Background
    ctx.fillStyle = '#16213e';
    ctx.fillRect(0, 0, W, H);

    // Grid
    ctx.strokeStyle = 'rgba(255,255,255,0.08)';
    ctx.lineWidth = 1;
    for (let i = 0; i <= 5; i++) {
      const y = pad.top + (plotH / 5) * i;
      ctx.beginPath(); ctx.moveTo(pad.left, y); ctx.lineTo(W - pad.right, y); ctx.stroke();
      const x = pad.left + (plotW / 5) * i;
      ctx.beginPath(); ctx.moveTo(x, pad.top); ctx.lineTo(x, H - pad.bottom); ctx.stroke();
    }

    // Axes labels
    ctx.fillStyle = '#888';
    ctx.font = '12px -apple-system, sans-serif';
    ctx.textAlign = 'center';
    for (let i = 0; i <= 5; i++) {
      const val = (maxClaims / 5) * i;
      const x = pad.left + (plotW / 5) * i;
      ctx.fillText(val.toString(), x, H - pad.bottom + 20);
    }
    ctx.textAlign = 'right';
    for (let i = 0; i <= 5; i++) {
      const val = Math.round((baseReward / 5) * (5 - i));
      const y = pad.top + (plotH / 5) * i;
      ctx.fillText(val.toString(), pad.left - 10, y + 4);
    }

    // Axis titles
    ctx.fillStyle = '#aaa';
    ctx.font = '13px -apple-system, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Total Claims', pad.left + plotW / 2, H - 8);
    ctx.save();
    ctx.translate(16, pad.top + plotH / 2);
    ctx.rotate(-Math.PI / 2);
    ctx.fillText('Reward (Psy tokens)', 0, 0);
    ctx.restore();

    // Draw curves
    curves.forEach(({ decay, color }) => {
      ctx.strokeStyle = color;
      ctx.lineWidth = 2.5;
      ctx.beginPath();
      for (let c = 0; c <= maxClaims; c += 2) {
        const reward = baseReward * decay / (decay + c);
        const x = pad.left + (c / maxClaims) * plotW;
        const y = pad.top + plotH - (reward / baseReward) * plotH;
        if (c === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
      }
      ctx.stroke();

      // Midpoint marker
      const midReward = baseReward / 2;
      const midX = pad.left + (decay / maxClaims) * plotW;
      const midY = pad.top + plotH - (midReward / baseReward) * plotH;
      ctx.fillStyle = color;
      ctx.beginPath();
      ctx.arc(midX, midY, 5, 0, Math.PI * 2);
      ctx.fill();
      ctx.fillStyle = 'rgba(255,255,255,0.7)';
      ctx.font = '10px monospace';
      ctx.textAlign = 'left';
      ctx.fillText('\u00BD reward @ ' + decay + ' claims', midX + 8, midY + 4);
    });
  </script>
</body>
</html>
